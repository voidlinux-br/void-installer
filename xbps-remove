#!/bin/bash

# Caminho do xbps-remove REAL
REAL="/usr/bin/xbps-remove"

# Antes de tudo, garantir que é root
if [[ "$EUID" -ne 0 ]]; then
  echo "erro: precisa ser root para executar 'xbps-remove -Scc'" >&2
  exit 1
fi

# Se foi chamado como "xbps-remove -Scc"
if [[ "$*" == "-Scc" ]]; then
  echo "[*] Interceptado: xbps-remove -Scc → limpando cache"
  rm -fv /var/cache/xbps/*.xbps
  rm -fv /var/cache/xbps/*.sig*
  exit 0
fi

# Caso contrário, repassa tudo para o comando real
exec "$REAL" "$@"

